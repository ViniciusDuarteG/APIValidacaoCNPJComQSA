<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Validador do QSA</title>
</head>
<body>
  <h1>Validador do QSA</h1>
  <input id="cnpj" placeholder="Insira o CNPJ">
  <button onclick="consultar()">Gerar relatório</button>

  <table border="1">
    <tbody>
      <tr><td>Razão Social</td><td id="razao"></td></tr>
      <tr><td>CNPJ</td><td id="cnpj_result"></td></tr>
      <tr><td>Tipo</td><td id="tipo"></td></tr>
      <tr><td>Situação</td><td id="situacao"></td></tr>
      <tr><td>Natureza Jurídica</td><td id="natureza"></td></tr>
      <tr><td>QSA</td><td id="qsa"></td></tr>
    </tbody>
  </table>

  <script>
    async function consultar() {
      const cnpj = document.getElementById("cnpj").value;
      const resp = await fetch(`http://127.0.0.1:5000/consulta_cnpj?cnpj=${cnpj}`);
      const dados = await resp.json();

      document.getElementById("razao").innerText = dados.razao_social || "-";
      document.getElementById("cnpj_result").innerText = dados.cnpj || "-";
      document.getElementById("tipo").innerText = dados.tipo || "-";
      document.getElementById("situacao").innerText = dados.situacao || "-";
      document.getElementById("natureza").innerText = dados.natureza_juridica || "-";
      document.getElementById("qsa").innerText = JSON.stringify(dados.qsa) || "-";
    }
  </script>
</body>
</html>
